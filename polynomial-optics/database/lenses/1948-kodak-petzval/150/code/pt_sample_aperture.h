case kodak__petzval__1948__150mm:
{
double pred_x;
double pred_y;
double pred_dx;
double pred_dy;
double sqr_err = FLT_MAX;
for(int k=0;k<5&&sqr_err > 1e-4f;k++)
{
  const double begin_x = x + dist * dx;
  const double begin_y = y + dist * dy;
  const double begin_dx = dx;
  const double begin_dy = dy;
  const double begin_lambda = lambda;
  pred_x =  + 114.948 *begin_dx + 0.792735 *begin_x + 1.85549 *begin_dx*begin_lambda + 0.50855 *begin_y*begin_dx*begin_dy + 0.00501251 *begin_x*begin_y*begin_dy + 0.0081405 *lens_ipow(begin_x, 2)*begin_dx + 1.46068 *begin_dx*lens_ipow(begin_dy, 2) + 2.22848e-05 *begin_x*lens_ipow(begin_y, 2) + 1.93605e-05 *lens_ipow(begin_x, 3) + 0.111755 *begin_x*lens_ipow(begin_dy, 2) + 0.609206 *begin_x*lens_ipow(begin_dx, 2) + -1.20317 *begin_dx*lens_ipow(begin_lambda, 2) + -0.145754 *begin_x*lens_ipow(begin_dx, 2)*begin_lambda + -6.62823e-06 *lens_ipow(begin_x, 3)*begin_lambda + -0.00191456 *lens_ipow(begin_x, 2)*begin_dx*begin_lambda + 0.0199996 *lens_ipow(begin_y, 2)*begin_dx*begin_lambda + 6.32549e-06 *lens_ipow(begin_x, 4)*begin_dx + 1.88619 *begin_x*lens_ipow(begin_dx, 4) + 0.0553309 *lens_ipow(begin_x, 2)*lens_ipow(begin_dx, 3) + -2.95546 *lens_ipow(begin_dx, 3)*lens_ipow(begin_lambda, 2) + 29.3293 *lens_ipow(begin_dx, 5) + 1.69083e-08 *lens_ipow(begin_x, 5) + -0.0370618 *lens_ipow(begin_y, 2)*begin_dx*lens_ipow(begin_lambda, 2) + 7.01953e-05 *lens_ipow(begin_x, 2)*begin_y*begin_dx*begin_dy + 0.000847179 *lens_ipow(begin_x, 3)*lens_ipow(begin_dx, 2) + 4.60613e-05 *begin_x*lens_ipow(begin_y, 2)*lens_ipow(begin_dy, 2) + 0.0224274 *lens_ipow(begin_y, 2)*begin_dx*lens_ipow(begin_lambda, 3) + 2.73363e-09 *lens_ipow(begin_x, 3)*lens_ipow(begin_y, 3)*begin_dy;
  pred_y =  + 0.792656 *begin_y + 114.946 *begin_dy + 1.91334 *begin_dy*begin_lambda + 0.112728 *begin_y*lens_ipow(begin_dx, 2) + 0.00803439 *lens_ipow(begin_y, 2)*begin_dy + 0.592699 *begin_y*lens_ipow(begin_dy, 2) + 0.50659 *begin_x*begin_dx*begin_dy + 0.00504931 *begin_x*begin_y*begin_dx + 1.51234 *lens_ipow(begin_dx, 2)*begin_dy + 2.27179e-05 *lens_ipow(begin_x, 2)*begin_y + -1.31753 *begin_dy*lens_ipow(begin_lambda, 2) + 2.0377e-05 *lens_ipow(begin_y, 3) + -0.0850779 *begin_y*lens_ipow(begin_dy, 2)*begin_lambda + 0.0196468 *lens_ipow(begin_x, 2)*begin_dy*begin_lambda + -0.00156488 *lens_ipow(begin_y, 2)*begin_dy*begin_lambda + -8.22859e-06 *lens_ipow(begin_y, 3)*begin_lambda + 9.92389e-05 *begin_x*lens_ipow(begin_y, 2)*begin_dx*begin_dy + 6.21064e-06 *lens_ipow(begin_y, 4)*begin_dy + 12.3039 *lens_ipow(begin_dy, 5) + 0.0464923 *lens_ipow(begin_y, 2)*lens_ipow(begin_dy, 3) + 4.57202e-05 *lens_ipow(begin_x, 2)*begin_y*lens_ipow(begin_dx, 2) + 1.31433 *begin_y*lens_ipow(begin_dy, 4) + -0.0363151 *lens_ipow(begin_x, 2)*begin_dy*lens_ipow(begin_lambda, 2) + 1.75412e-08 *lens_ipow(begin_y, 5) + 5.54158e-07 *lens_ipow(begin_x, 2)*lens_ipow(begin_y, 2)*begin_dy + 0.000786698 *lens_ipow(begin_y, 3)*lens_ipow(begin_dy, 2) + 0.0219375 *lens_ipow(begin_x, 2)*begin_dy*lens_ipow(begin_lambda, 3) + 2.70638e-09 *lens_ipow(begin_x, 3)*lens_ipow(begin_y, 3)*begin_dx;
  pred_dx =  + 0.58319 *begin_dx + -0.00465434 *begin_x + -0.00124166 *begin_dx*begin_lambda + 0.0049887 *begin_y*begin_dx*begin_dy + 0.00010224 *begin_x*begin_y*begin_dy + 0.000129503 *lens_ipow(begin_x, 2)*begin_dx + -0.235296 *lens_ipow(begin_dx, 3) + -0.223915 *begin_dx*lens_ipow(begin_dy, 2) + 4.4611e-07 *begin_x*lens_ipow(begin_y, 2) + 3.61645e-07 *lens_ipow(begin_x, 3) + 0.00187504 *begin_x*lens_ipow(begin_dy, 2) + 0.0059719 *begin_x*lens_ipow(begin_dx, 2) + 4.52384e-05 *lens_ipow(begin_y, 2)*begin_dx + 4.20533e-10 *lens_ipow(begin_x, 3)*lens_ipow(begin_y, 2) + 9.19634e-08 *lens_ipow(begin_x, 4)*begin_dx + 0.00937094 *begin_x*lens_ipow(begin_dx, 4) + 0.000480885 *lens_ipow(begin_x, 2)*lens_ipow(begin_dx, 3) + 2.8902e-10 *lens_ipow(begin_x, 5) + 2.90649e-06 *begin_x*lens_ipow(begin_y, 2)*lens_ipow(begin_dx, 2) + 7.21061e-08 *lens_ipow(begin_x, 2)*lens_ipow(begin_y, 2)*begin_dx + 1.011e-05 *lens_ipow(begin_x, 3)*lens_ipow(begin_dx, 2) + 1.28282e-06 *begin_x*lens_ipow(begin_y, 2)*lens_ipow(begin_dy, 2)*begin_lambda + 2.72498e-10 *lens_ipow(begin_x, 3)*lens_ipow(begin_y, 3)*begin_dy + 0.000627503 *begin_x*begin_y*lens_ipow(begin_dx, 2)*begin_dy*lens_ipow(begin_lambda, 2) + 1.19439e-05 *lens_ipow(begin_x, 2)*begin_y*begin_dx*begin_dy*lens_ipow(begin_lambda, 2) + 1.40299e-08 *lens_ipow(begin_x, 2)*lens_ipow(begin_y, 3)*begin_dx*begin_dy + 3.6086e-11 *lens_ipow(begin_x, 3)*lens_ipow(begin_y, 4)*lens_ipow(begin_dy, 2) + -4.36112e-07 *lens_ipow(begin_x, 2)*lens_ipow(begin_y, 3)*begin_dx*lens_ipow(begin_dy, 3)*lens_ipow(begin_lambda, 2);
  pred_dy =  + -0.00465275 *begin_y + 0.583339 *begin_dy + -0.00132377 *begin_dy*begin_lambda + 0.00178731 *begin_y*lens_ipow(begin_dx, 2) + 0.000127539 *lens_ipow(begin_y, 2)*begin_dy + 0.00586454 *begin_y*lens_ipow(begin_dy, 2) + 0.00486228 *begin_x*begin_dx*begin_dy + 9.81004e-05 *begin_x*begin_y*begin_dx + -0.228828 *lens_ipow(begin_dx, 2)*begin_dy + 4.38066e-07 *lens_ipow(begin_x, 2)*begin_y + 3.42635e-07 *lens_ipow(begin_y, 3) + 4.451e-05 *lens_ipow(begin_x, 2)*begin_dy + -0.237458 *lens_ipow(begin_dy, 3) + 6.88088e-06 *begin_x*lens_ipow(begin_y, 2)*begin_dx*begin_dy + 1.05772e-07 *lens_ipow(begin_y, 4)*begin_dy + 5.79345e-08 *begin_x*lens_ipow(begin_y, 3)*begin_dx + 0.000202298 *begin_x*begin_y*begin_dx*lens_ipow(begin_dy, 2) + 0.000540943 *lens_ipow(begin_y, 2)*lens_ipow(begin_dy, 3) + 4.56019e-10 *lens_ipow(begin_x, 2)*lens_ipow(begin_y, 3) + 0.0104788 *begin_y*lens_ipow(begin_dy, 4) + 9.74082e-07 *lens_ipow(begin_y, 3)*lens_ipow(begin_dx, 2) + 3.41252e-10 *lens_ipow(begin_y, 5) + 6.82296e-08 *lens_ipow(begin_x, 2)*lens_ipow(begin_y, 2)*begin_dy + 2.65144e-06 *lens_ipow(begin_x, 2)*begin_y*lens_ipow(begin_dy, 2) + 1.14672e-05 *lens_ipow(begin_y, 3)*lens_ipow(begin_dy, 2) + 0.00177685 *lens_ipow(begin_y, 2)*lens_ipow(begin_dx, 4)*begin_dy + -6.51365e-07 *begin_x*lens_ipow(begin_y, 3)*lens_ipow(begin_dx, 3)*begin_lambda + 8.88669e-11 *lens_ipow(begin_x, 3)*lens_ipow(begin_y, 3)*begin_dx*begin_lambda;
  Eigen::Matrix2d dx1_domega0;
  dx1_domega0(0, 0) =  + 114.948  + 1.85549 *begin_lambda + 0.50855 *begin_y*begin_dy + 0.0081405 *lens_ipow(begin_x, 2) + 1.46068 *lens_ipow(begin_dy, 2) + 1.21841 *begin_x*begin_dx + -1.20317 *lens_ipow(begin_lambda, 2) + -0.291509 *begin_x*begin_dx*begin_lambda + -0.00191456 *lens_ipow(begin_x, 2)*begin_lambda + 0.0199996 *lens_ipow(begin_y, 2)*begin_lambda + 6.32549e-06 *lens_ipow(begin_x, 4) + 7.54478 *begin_x*lens_ipow(begin_dx, 3) + 0.165993 *lens_ipow(begin_x, 2)*lens_ipow(begin_dx, 2) + -8.86637 *lens_ipow(begin_dx, 2)*lens_ipow(begin_lambda, 2) + 146.646 *lens_ipow(begin_dx, 4) + -0.0370618 *lens_ipow(begin_y, 2)*lens_ipow(begin_lambda, 2) + 7.01953e-05 *lens_ipow(begin_x, 2)*begin_y*begin_dy + 0.00169436 *lens_ipow(begin_x, 3)*begin_dx + 0.0224274 *lens_ipow(begin_y, 2)*lens_ipow(begin_lambda, 3)+0.0f;
  dx1_domega0(0, 1) =  + 0.50855 *begin_y*begin_dx + 0.00501251 *begin_x*begin_y + 2.92136 *begin_dx*begin_dy + 0.22351 *begin_x*begin_dy + 7.01953e-05 *lens_ipow(begin_x, 2)*begin_y*begin_dx + 9.21227e-05 *begin_x*lens_ipow(begin_y, 2)*begin_dy + 2.73363e-09 *lens_ipow(begin_x, 3)*lens_ipow(begin_y, 3)+0.0f;
  dx1_domega0(1, 0) =  + 0.225456 *begin_y*begin_dx + 0.50659 *begin_x*begin_dy + 0.00504931 *begin_x*begin_y + 3.02468 *begin_dx*begin_dy + 9.92389e-05 *begin_x*lens_ipow(begin_y, 2)*begin_dy + 9.14404e-05 *lens_ipow(begin_x, 2)*begin_y*begin_dx + 2.70638e-09 *lens_ipow(begin_x, 3)*lens_ipow(begin_y, 3)+0.0f;
  dx1_domega0(1, 1) =  + 114.946  + 1.91334 *begin_lambda + 0.00803439 *lens_ipow(begin_y, 2) + 1.1854 *begin_y*begin_dy + 0.50659 *begin_x*begin_dx + 1.51234 *lens_ipow(begin_dx, 2) + -1.31753 *lens_ipow(begin_lambda, 2) + -0.170156 *begin_y*begin_dy*begin_lambda + 0.0196468 *lens_ipow(begin_x, 2)*begin_lambda + -0.00156488 *lens_ipow(begin_y, 2)*begin_lambda + 9.92389e-05 *begin_x*lens_ipow(begin_y, 2)*begin_dx + 6.21064e-06 *lens_ipow(begin_y, 4) + 61.5197 *lens_ipow(begin_dy, 4) + 0.139477 *lens_ipow(begin_y, 2)*lens_ipow(begin_dy, 2) + 5.25731 *begin_y*lens_ipow(begin_dy, 3) + -0.0363151 *lens_ipow(begin_x, 2)*lens_ipow(begin_lambda, 2) + 5.54158e-07 *lens_ipow(begin_x, 2)*lens_ipow(begin_y, 2) + 0.0015734 *lens_ipow(begin_y, 3)*begin_dy + 0.0219375 *lens_ipow(begin_x, 2)*lens_ipow(begin_lambda, 3)+0.0f;
  Eigen::Matrix2d invJ;
  const double invdet = 1.0f/(dx1_domega0(0, 0)*dx1_domega0(1, 1) - dx1_domega0(0, 1)*dx1_domega0(1, 0));
  invJ(0, 0) =  dx1_domega0(1, 1)*invdet;
  invJ(1, 1) =  dx1_domega0(0, 0)*invdet;
  invJ(0, 1) = -dx1_domega0(0, 1)*invdet;
  invJ(1, 0) = -dx1_domega0(1, 0)*invdet;
  const Eigen::Vector2d dx1(out_x - pred_x, out_y - pred_y);
  for(int i=0;i<2;i++)
  {
    dx += invJ(0, i)*dx1(i);
    dy += invJ(1, i)*dx1(i);
  }
  sqr_err = dx1(0)*dx1(0) + dx1(1)*dx1(1);
}
out_dx = pred_dx;
out_dy = pred_dy;
} break;
